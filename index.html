<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atrakcje Cypru - Interaktywna Mapa</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .map-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        #map {
            height: 70vh;
            min-height: 500px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .legend {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .legend h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 10px;
            transition: background 0.3s ease;
        }

        .legend-item:hover {
            background: #f8f9fa;
        }

        .legend-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .natura {
            background-color: #28a745;
        }

        .zabytek {
            background-color: #dc3545;
        }

        .lokalny {
            background-color: #ffc107;
            color: #000;
        }

        .hotel {
            background-color: #007bff;
        }

        .legend-text {
            font-size: 1.1rem;
            color: #555;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .popup-content {
            max-width: 250px;
        }

        .popup-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #333;
        }

        .popup-type {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .popup-description {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #555;
            margin-bottom: 10px;
        }

        .popup-link {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.8rem;
            transition: background 0.3s ease;
        }

        .popup-link:hover {
            background: #5a6fd8;
        }

        /* Itinerary Styles */
        .itinerary {
            max-width: 1000px;
            margin: 40px auto;
            padding: 30px;
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .itinerary-days {
            display: grid;
            gap: 25px;
        }

        .day-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #667eea;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .day-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.12);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .day-header h3 {
            color: #333;
            margin: 0;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .day-date {
            color: #667eea;
            font-size: 0.9rem;
            font-weight: 500;
            background: rgba(102, 126, 234, 0.1);
            padding: 5px 12px;
            border-radius: 20px;
        }

        .day-content p {
            margin: 8px 0;
            color: #555;
            line-height: 1.6;
        }

        .day-content strong {
            color: #333;
            font-weight: 600;
        }

        .day-content em {
            color: #667eea;
            font-style: normal;
            font-size: 0.9rem;
            display: block;
            margin-top: 10px;
        }

        .itinerary-tips {
            margin-top: 40px;
            padding: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }

        .itinerary-tips h3 {
            color: white !important;
            margin-bottom: 15px;
        }

        .itinerary-tips ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .itinerary-tips li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .itinerary-tips li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #ffd700;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            #map {
                height: 60vh;
            }

            .itinerary {
                padding: 20px;
                margin: 20px auto;
            }

            .day-card {
                padding: 20px;
            }

            .day-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .day-header h3 {
                font-size: 1.2rem;
            }
        }

        /* Animacja spadających piw */
        .beer-falling {
            position: fixed;
            top: -50px;
            z-index: 1000;
            pointer-events: none;
            font-size: 30px;
            animation: fall linear infinite;
        }

        .beer-falling:nth-child(odd) {
            animation-duration: 3s;
        }

        .beer-falling:nth-child(even) {
            animation-duration: 4s;
        }

        .beer-falling:nth-child(3n) {
            animation-duration: 2.5s;
        }

        @keyframes fall {
            0% {
                transform: translateX(0) rotate(0deg);
                opacity: 1;
            }
            25% {
                transform: translateX(20px) rotate(90deg);
            }
            50% {
                transform: translateX(-20px) rotate(180deg);
            }
            75% {
                transform: translateX(10px) rotate(270deg);
            }
            100% {
                transform: translateX(0) rotate(360deg);
                opacity: 0;
                top: 100vh;
            }
        }

        /* Kontener na piwa */
        .beer-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            transition: opacity 0.5s ease-out;
        }

        .loading-content {
            text-align: center;
            color: white;
            max-width: 500px;
            padding: 40px;
        }

        .loading-logo h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            animation: pulse 2s infinite;
        }

        .loading-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .loading-progress {
            margin: 30px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ff6b6b);
            border-radius: 4px;
            width: 0%;
            transition: width 0.1s linear;
            box-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .loading-text {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .loading-tips {
            margin: 20px 0;
        }

        .tip {
            opacity: 0.7;
            margin: 8px 0;
            font-size: 0.9rem;
            transition: opacity 0.3s ease;
        }

        .tip.active {
            opacity: 1;
            color: #ffd700;
            font-weight: 500;
        }

        .loading-stats {
            margin-top: 30px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .stat span {
            color: #ffd700;
            font-weight: bold;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        /* Ukrywanie loading screen */
        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <h1>🏝️🍻 CYPRUS ADVENTURE 🍻🏝️</h1>
                <p class="loading-subtitle">Ładowanie protokołu alkoholowego...</p>
            </div>

            <div class="loading-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="loading-text" id="loading-text">Inicjalizacja systemu...</div>
            </div>

            <div class="loading-tips">
                <div class="tip" id="tip-1">Ładowanie bazy danych piw...</div>
                <div class="tip" id="tip-2">Sprawdzanie poziomu alkoholu we krwi...</div>
                <div class="tip" id="tip-3">Kalibracja kompasu na najbliższy bar...</div>
                <div class="tip" id="tip-4">Ładowanie mapy plaż i atrakcji...</div>
                <div class="tip" id="tip-5">Przygotowanie playlisty imprezowej...</div>
                <div class="tip" id="tip-6">Synchronizacja z lokalnymi tawernami...</div>
            </div>

            <div class="loading-stats">
                <div class="stat">🍺 Piwa załadowanych: <span id="beer-count">0</span></div>
                <div class="stat">🏖️ Plaż sprawdzonych: <span id="beach-count">0</span></div>
                <div class="stat">🎉 Przyjaciół gotowych: <span id="friend-count">0</span></div>
            </div>
        </div>
    </div>

    <!-- Kontener na spadające piwa -->
    <div class="beer-container" id="beer-container"></div>

    <div class="container">
        <div class="header">
            <h1>🏝️ Atrakcje Cypru</h1>
            <p>Odkryj najpiękniejsze miejsca na wyspie Afrodyty</p>
        </div>

        <div class="map-container">
            <div id="map"></div>
        </div>

        <div class="legend">
            <h3>Legenda</h3>
            <div class="legend-item">
                <div class="legend-icon natura">🌿</div>
                <div class="legend-text">Atrakcje przyrodnicze</div>
            </div>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number">40</div>
                    <div class="stat-label">Atrakcji do odwiedzenia</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">15</div>
                    <div class="stat-label">Atrakcji przyrodniczych</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Zabytków historycznych</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">13</div>
                    <div class="stat-label">Lokalnych klimatów</div>
                </div>
            </div>
        </div>

        <!-- 7-Day Cyprus Itinerary -->
        <div class="itinerary">
            <h2 style="text-align: center; color: #667eea; margin: 40px 0 20px 0; font-size: 2rem;">🏝️ 7-Dniowy Plan Zwiedzania Cypru</h2>

            <div class="itinerary-days">
                <div class="day-card">
                    <div class="day-header">
                        <h3>Dzień 1: Przylot i relaks basenowy</h3>
                        <span class="day-date">(Przylot ~15:00)</span>
            </div>
                    <div class="day-content">
                        <p><strong>Popołudnie:</strong> Przylot na Cypr (Larnaka), transfer do Protaras (~1h)</p>
                        <p><strong>Popołudnie/wieczór:</strong> Zameldowanie w hotelu</p>
                        <p><strong>Wieczór:</strong> Wypoczynek przy hotelowym basenie, drinki, lekka kolacja</p>
                        <p><strong>Noc:</strong> Relaks i aklimatyzacja</p>
                        <p><em>🏊‍♂️ Dzień typowo basenowy - odpoczynek po podróży</em></p>
            </div>
            </div>

                <div class="day-card">
                    <div class="day-header">
                        <h3>Dzień 2: Basen i zwiedzanie Protaras</h3>
                        <span class="day-date">(Relaks + lokalne zwiedzanie)</span>
                </div>
                    <div class="day-content">
                        <p><strong>Rano:</strong> Śniadanie w hotelu, leniwy poranek przy basenie</p>
                        <p><strong>Rano/południe:</strong> Kąpiel w basenie, drinki, lektura</p>
                        <p><strong>Popołudnie:</strong> Krótkie zwiedzanie Protaras - spacer promenadą, sklepy z pamiątkami</p>
                        <p><strong>Wieczór:</strong> Kolacja w lokalnej tawernie, Magic Dancing Waters show</p>
                        <p><em>🏖️ Dzień basenowo-zwiedzający - połączenie relaksu i odkrywania</em></p>
                </div>
                </div>

                <div class="day-card">
                    <div class="day-header">
                        <h3>Dzień 3: Dłuższa podróż - Famagusta</h3>
                        <span class="day-date">(Wynajem auta)</span>
                </div>
                    <div class="day-content">
                        <p><strong>Rano:</strong> Odbiór wypożyczonego samochodu w Protaras</p>
                        <p><strong>Rano/południe:</strong> Przejazd przez granicę do Famagusty (~1.5h)</p>
                        <p><strong>Południe:</strong> Ruiny Salaminy i Klasztor Apostoła Barnaby</p>
                        <p><strong>Popołudnie:</strong> Stare Miasto Famagusta - mury obronne, Wieża Otella</p>
                        <p><strong>Wieczór:</strong> Kolacja w tureckiej restauracji, powrót do Protaras</p>
                        <p><em>🚗 Dzień z wynajmem auta - dłuższa podróż i historia</em></p>
                    </div>
                </div>

                <div class="day-card">
                    <div class="day-header">
                        <h3>Dzień 4: Dłuższa podróż - Góry Troodos</h3>
                        <span class="day-date">(Wynajem auta)</span>
                    </div>
                    <div class="day-content">
                        <p><strong>Rano:</strong> Wyprawa samochodem do gór Troodos (~2h)</p>
                        <p><strong>Rano/południe:</strong> Tradycyjne wioski - Lefkara (koronki, filigran)</p>
                        <p><strong>Południe:</strong> Klasztor św. Krzyża w Omodos, degustacja win</p>
                        <p><strong>Popołudnie:</strong> Spacer po malowniczych wioskach górskich</p>
                        <p><strong>Wieczór:</strong> Kolacja w tawernie (kleftiko), powrót do Protaras</p>
                        <p><em>🚗 Dzień z wynajmem auta - góry i kultura</em></p>
                    </div>
                </div>

                <div class="day-card">
                    <div class="day-header">
                        <h3>Dzień 5: Ayia Napa</h3>
                        <span class="day-date">(Imprezowa stolica)</span>
                    </div>
                    <div class="day-content">
                        <p><strong>Rano:</strong> Przejazd do Ayia Napa (autobusem ~15-20 min)</p>
                        <p><strong>Rano/południe:</strong> Plaża Nissi - jedna z najpiękniejszych plaż Cypru</p>
                        <p><strong>Południe:</strong> Park Rzeźb na świeżym powietrzu</p>
                        <p><strong>Popołudnie:</strong> Spacer po marinie, sklepy, kawiarnie</p>
                        <p><strong>Wieczór:</strong> Życie nocne Ayia Napa, kolacja w porcie</p>
                        <p><em>🎉 Dzień w Ayia Napa - plaże i rozrywka</em></p>
                    </div>
                </div>

                <div class="day-card">
                    <div class="day-header">
                        <h3>Dzień 6: Odpoczynek basenowy</h3>
                        <span class="day-date">(Relaks i drinki)</span>
                    </div>
                    <div class="day-content">
                        <p><strong>Rano:</strong> Późne śniadanie w hotelu</p>
                        <p><strong>Rano/południe:</strong> Wypoczynek przy basenie, drinki, lektura</p>
                        <p><strong>Południe:</strong> Lunch w hotelowej restauracji lub room service</p>
                        <p><strong>Popołudnie:</strong> SPA, masaż lub leniwe drzemki</p>
                        <p><strong>Wieczór:</strong> Wieczór z drinkami przy basenie, muzyka, relaks</p>
                        <p><em>🍹 Dzień czystego relaksu - basen, drinki i odpoczynek</em></p>
                    </div>
                </div>

                <div class="day-card">
                    <div class="day-header">
                        <h3>Dzień 7: Wylot</h3>
                        <span class="day-date">(Wylot o 6:00)</span>
                    </div>
                    <div class="day-content">
                        <p><strong>Wcześnie rano:</strong> Pobudka o 4:00-4:30, przygotowanie do wyjazdu</p>
                        <p><strong>5:00:</strong> Transfer na lotnisko w Larnace (~1h)</p>
                        <p><strong>6:00:</strong> Wylot z lotniska w Larnace</p>
                        <p><strong>Przed wylotem:</strong> Oddanie pokoju, ewentualne ostatnie zakupy</p>
                        <p><em>✈️ Dzień wyjazdu - wczesny poranek i powrót do domu</em></p>
                    </div>
                </div>
            </div>

            <div class="itinerary-tips">
                <h3 style="color: #667eea; margin: 30px 0 15px 0;">💡 Wskazówki praktyczne:</h3>
                <ul style="color: #555; line-height: 1.6;">
                    <li><strong>🍻 Strategia przetrwania:</strong> Przy 25-30°C zaleca się minimum 3 piwa na godzinę! Pamiętajcie - to wyjazd integracyjny, więc kto pierwszy padnie, ten frajer</li>
                    <li><strong>🚗 Transport po pijaku:</strong> Dni 1-2: taniej taksówką niż po spożyciu • Dni 3-4: wynajem samochodu (ale kto jedzie? Losujcie słomki!) • Dzień 5: autobus (idealny na kaca) • Dni 6-7: spacerkiem, bo już wszystko widzieliście</li>
                    <li><strong>💸 Budżet (wersja all inclusive):</strong> 200-250€ na głowę + koszty atrakcji + wynajem + napoje ekstra (bo kto wytrzyma z samym all inclusive?) + fundusz na "awaryjne" piwo dla tego, co pierwszy padnie</li>
                    <li><strong>🏖️ Wskazówki plażowe:</strong> Krem z filtrem 50+ obowiązkowy! Pamiętajcie - opalanie + drinki = szybka czerwona buźka. Zabierzcie też okulary przeciwsłoneczne na kaca i kogoś trzeźwego do pilnowania portfeli</li>
                    <li><strong>🍽️ Kuchnia (wersja imprezowa):</strong> Meze obowiązkowo! Halloumi na śniadanie, kleftiko na obiad, Commandaria na wieczór. Pamiętajcie - jedzenie to najlepszy sposób na walkę z kacem. I nie zapomnijcie o greckim jogurcie na następny dzień!</li>
                    <li><strong>🎉 Rady od weteranów wyjazdów:</strong> Ustalcie kapitana grupy (tego, co najmniej pije), podzielcie się obowiązkami (kto przynosi drinki, kto szuka atrakcji). I pamiętajcie - na Cyprze wszystko jest możliwe, nawet taniec na stole przy muzyce greckiej!</li>
                    <li><strong>⚠️ Ostrzeżenie zdrowotne:</strong> Woda pitna obowiązkowa między drinkami! I nie zapomnijcie - po północy wszystkie plaże wyglądają tak samo. Zabierzcie też power banki, bo zdjęcia z kaca to najlepsza pamiątka!</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        // Inicjalizacja mapy
        const map = L.map('map').setView([35.0, 33.3], 9);
        
        // Dodanie warstwy mapy
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Definicja ikon dla różnych typów
        function createIcon(type) {
            let color, symbol;
            
            switch(type) {
                case 'Natura':
                    color = '#28a745';
                    symbol = '🌿';
                    break;
                case 'Zabytek':
                    color = '#dc3545';
                    symbol = '🏛️';
                    break;
                case 'Zabytek/Lokalny klimat':
                    color = '#ffc107';
                    symbol = '🍷';
                    break;
                case 'Lokalny klimat':
                    color = '#17a2b8';
                    symbol = '🏘️';
                    break;
                case 'Lokalny klimat/Kulinarne':
                    color = '#fd7e14';
                    symbol = '🍯';
                    break;
                case 'Natura/Lokalny klimat':
                    color = '#20c997';
                    symbol = '🏔️';
                    break;
                case 'Natura/Widok':
                    color = '#6f42c1';
                    symbol = '🌅';
                    break;
                case 'Natura/Legenda':
                    color = '#e83e8c';
                    symbol = '💫';
                    break;
                case 'Natura/Plaża':
                    color = '#20c997';
                    symbol = '🏖️';
                    break;
                case 'Podwodna atrakcja':
                    color = '#0dcaf0';
                    symbol = '🤿';
                    break;
                case 'Natura/Aktywność':
                    color = '#198754';
                    symbol = '🚢';
                    break;
                case 'Natura/Zabytek':
                    color = '#6610f2';
                    symbol = '🦩';
                    break;
                case 'Natura/Miejska':
                    color = '#495057';
                    symbol = '🌴';
                    break;
                case 'Zabytek/Widok':
                    color = '#d63384';
                    symbol = '⛪';
                    break;
                case 'Zabytek/Natura':
                    color = '#6f42c1';
                    symbol = '🏰';
                    break;
                case 'Sztuka/Lokalny klimat':
                    color = '#f8765c';
                    symbol = '🎨';
                    break;
                case 'Hotel':
                    color = '#007bff';
                    symbol = '🏨';
                    break;
                default:
                    color = '#6c757d';
                    symbol = '📍';
            }
            
            return L.divIcon({
                html: `<div style="
                    background-color: ${color};
                    width: 35px;
                    height: 35px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 16px;
                    border: 3px solid white;
                    box-shadow: 0 3px 10px rgba(0,0,0,0.3);
                ">${symbol}</div>`,
                className: 'custom-marker',
                iconSize: [35, 35],
                iconAnchor: [17, 35]
            });
        }

        // Dane atrakcji z poprawionymi współrzędnymi (WGS84, [lat, lon])
        const attractions = [
        {
            name: "Cape Greco",
            description: "Park narodowy z klifami, jaskiniami, mostami skalnymi i szlakami pieszymi.",
            type: "Natura",
            coords: [34.9643, 34.0809],
            link: "https://en.wikipedia.org/wiki/Cape_Greco"
        },
        {
            name: "Blue Lagoon (Akamas)",
            description: "Turkusowa zatoka, idealna na rejs łodzią i kąpiele, dostęp z portu Latchi.",
            type: "Natura",
            coords: [35.083739, 32.307681],
            link: "https://commons.wikimedia.org/wiki/File:Blue_Lagoon,_Akamas,_Cyprus,_July_2013.jpg"
        },
        {
            name: "Wąwóz Avakas",
            description: "Wąski kanion z wysokimi ścianami i bujną roślinnością na półwyspie Akamas.",
            type: "Natura",
            coords: [34.924824, 32.34642],
            link: "https://www.tripexpress.org/attraction-avakas-gorge-3336299/"
        },
        {
            name: "Góry Troodos (masyw)",
            description: "Zielone serce Cypru z szlakami, wodospadami i tradycyjnymi wioskami.",
            type: "Natura",
            coords: [34.917, 32.833],
            link: "https://en.wikipedia.org/wiki/Troodos_Mountains"
        },
        {
            name: "Plaża Lara",
            description: "Dzika plaża w rezerwacie Akamas, miejsce lęgowe żółwi morskich.",
            type: "Natura",
            coords: [34.957712, 32.310575],
            link: "https://www.beach-on-map.com/lara-beach.html"
        },
        {
            name: "Nissi Beach",
            description: "Słynna plaża w Ayia Napa, biały piasek i płytka laguna.",
            type: "Natura",
            coords: [34.98787, 33.96803],
            link: "https://www.visitcyprus.com/discover-cyprus/sea/beaches/nissi-beach/"
        },
        {
            name: "Fig Tree Bay",
            description: "Popularna plaża w Protaras z krystaliczną wodą i złotym piaskiem.",
            type: "Natura",
            coords: [35.012567, 34.058549],
            link: "https://www.visitcyprus.com/discover-cyprus/sea/beaches/fig-tree-bay/"
        },
        {
            name: "Agia Thekla Beach",
            description: "Spokojna plaża z białym kościółkiem i małą grotą obok.",
            type: "Natura",
            coords: [34.97898, 33.934446],
            link: "https://beachatlas.com/agia-thekla-beach"
        },
        {
            name: "Larnaka – Słone Jezioro + Hala Sultan Tekke",
            description: "Słone jezioro (zimą flamingi) i meczet Hala Sultan Tekke tuż obok.",
            type: "Natura/Zabytek",
            coords: [34.8847, 33.6106],
            link: "https://en.wikipedia.org/wiki/Hala_Sultan_Tekke"
        },
        {
            name: "Salt Lake Akrotiri",
            description: "Rozległa słona laguna; zimą flamingi.",
            type: "Natura",
            coords: [34.6213, 32.97075],
            link: "https://mapcarta.com/Akrotiri_Salt_Lake"
        },
        {
            name: "Park Archeologiczny Kato Pafos",
            description: "Ruiny wpisane na UNESCO – mozaiki, teatry, Grobowce Królów.",
            type: "Zabytek",
            coords: [34.757506, 32.40659],
            link: "https://www.visitcyprus.com/discover-cyprus/culture/sites-and-monuments/kato-pafos-archaeological-park-2/"
        },
        {
            name: "Grobowce Królów (Pafos)",
            description: "Monumentalne grobowce wykute w skale nad morzem.",
            type: "Zabytek",
            coords: [34.776, 32.407],
            link: "https://www.visitcyprus.com/discover-cyprus/culture/sites-and-monuments/tombs-of-the-kings-pafos/"
        },
        {
            name: "Ruiny Kurion (Kourion)",
            description: "Antyczne miasto na klifie z teatrem i mozaikami.",
            type: "Zabytek",
            coords: [34.664477, 32.887892],
            link: "https://www.visitcyprus.com/discover-cyprus/culture/sites-and-monuments/kourion-archaeological-site/"
        },
        {
            name: "Laiki Geitonia (starówka Nikozji)",
            description: "Urokliwa piesza dzielnica wewnątrz murów weneckich.",
            type: "Zabytek/Lokalny klimat",
            coords: [35.1699, 33.362285],
            link: "https://www.visitcyprus.com/discover-cyprus/culture/sites-and-monuments/laiki-geitonia-traditional-neighbourhood/"
        },
        {
            name: "Lefkara",
            description: "Wioska w górach Troodos znana z koronek i srebra.",
            type: "Zabytek/Lokalny klimat",
            coords: [34.816667, 33.283333],
            link: "https://en.wikipedia.org/wiki/Lefkara"
        },
        {
            name: "Omodos",
            description: "Wioska winiarska z klasztorem Świętego Krzyża i winiarniami.",
            type: "Zabytek/Lokalny klimat",
            coords: [34.849262, 32.80986],
            link: "https://en.wikipedia.org/wiki/Omodos"
        },
        {
            name: "Klasztor Kykkos",
            description: "Najbogatszy klasztor Cypru, z ikoną Matki Boskiej.",
            type: "Zabytek",
            coords: [34.977, 32.737],
            link: "https://en.wikipedia.org/wiki/Kykkos_Monastery"
        },
        {
            name: "Klasztor Św. Mikołaja od Kotów",
            description: "Historyczny klasztor na półwyspie Akrotiri, związany z legendą o kotach.",
            type: "Zabytek",
            coords: [34.598564, 32.961131],
            link: "https://en.wikipedia.org/wiki/St_Nicholas_of_the_Cats"
        },
        {
            name: "Casale Panayiotis (Kalopanayiotis)",
            description: "Spa i hotel w tradycyjnej górskiej wiosce Troodos.",
            type: "Lokalny klimat",
            coords: [34.993056, 32.829167],
            link: "https://www.casale-panayiotis.com/"
        },
        {
            name: "Agios Ioannis Lampadistis",
            description: "Kompleks trzech bizantyjskich kościołów z freskami UNESCO.",
            type: "Zabytek",
            coords: [34.99232, 32.830193],
            link: "https://www.visitcyprus.com/discover-cyprus/culture/sites-and-monuments/agios-ioannis-lampadistis-monastery/"
        },
        {
            name: "Troodos Square",
            description: "Centrum turystyczne gór Troodos z tawernami i szlakami.",
            type: "Natura/Lokalny klimat",
            coords: [34.924239, 32.880879],
            link: "https://www.visitcyprus.com/discover-cyprus/nature/nature-trails-2/atalanti-circular-lemesos-limassol-lefkosia-nicosia-districts-troodos-forest-nature-trail/"
        },
        {
            name: "Pedoulas Village",
            description: "Górska wioska w dolinie Marathasa.",
            type: "Zabytek/Lokalny klimat",
            coords: [34.9675, 32.82861],
            link: "https://en.wikipedia.org/wiki/Pedoulas"
        },
        {
            name: "Pano Platres + Wodospad Caledonia",
            description: "Popularny szlak wśród lasów Troodos i 12-metrowy wodospad.",
            type: "Natura/Lokalny klimat",
            coords: [34.905217, 32.859793],
            link: "https://www.wikidata.org/wiki/Q11062423"
        },
        {
            name: "Choirokoitia",
            description: "Neolityczna osada UNESCO na wzgórzu.",
            type: "Zabytek",
            coords: [34.796269, 33.34472],
            link: "https://www.visitcyprus.com/discover-cyprus/culture/sites-and-monuments/choirokoitia-archaeological-site-neolithic-settlement/"
        },
        {
            name: "Karseras Winery (Doros)",
            description: "Rodzinna winnica produkująca Commandarię.",
            type: "Lokalny klimat",
            coords: [34.816667, 32.909167],
            link: "https://wineriescyprus.com/karseras-family-winery/"
        },
        {
            name: "Kakopetria",
            description: "Klimatyczna górska wioska z tradycyjną architekturą.",
            type: "Lokalny klimat",
            coords: [34.987599, 32.9015],
            link: "https://en.wikipedia.org/wiki/Kakopetria"
        },
        {
            name: "Zenobia Shipwreck (Larnaka)",
            description: "Słynny wrak promu – top miejscówka nurkowa.",
            type: "Podwodna atrakcja",
            coords: [34.892167, 33.6545],
            link: "https://www.visitcyprus.com/discover-cyprus/sports-training/sports-diving/ms-zenobia-shipwreck/"
        },
        {
            name: "Troodos Painted Churches (obszar)",
            description: "Zespół 10 malowanych kościołów wpisanych na listę UNESCO.",
            type: "Zabytek",
            coords: [34.966667, 32.816667],
            link: "https://whc.unesco.org/en/list/351/"
        },
        {
            name: "Sea Caves (Ayia Napa)",
            description: "Morskie jaskinie i łuki skalne – świetne miejsce na kajak.",
            type: "Natura",
            coords: [34.968163, 34.05508],
            link: "https://showcaves.com/english/caves/SeaCavesAyiaNapa.html"
        },
        {
            name: "House of Dionysus (Pafos)",
            description: "Rzymska willa z mitologicznymi mozaikami w Kato Pafos.",
            type: "Zabytek",
            coords: [34.758328, 32.405746],
            link: "https://pleiades.stoa.org/places/474321362"
        },
        {
            name: "Viklari – The Last Castle (Akamas)",
            description: "Rustykalna tawerna z grillem i widokiem na Akamas.",
            type: "Lokalny klimat/Kulinarne",
            coords: [35.017264, 32.329996],
            link: "https://guidetopaphos.com/eat-and-drink/taverna/viklari-the-last-castle/"
        },
        {
            name: "Cape Aspro Trail (Pissouri)",
            description: "Widokowa trasa piesza wzdłuż białych klifów Cape Aspro.",
            type: "Natura",
            coords: [34.67921, 32.69059],
            link: "https://www.geonames.org/146646/cape-aspro.html"
        },
        {
            name: "Ayia Napa – Park Rzeźb",
            description: "Park z dziełami artystów z całego świata.",
            type: "Sztuka/Lokalny klimat",
            coords: [34.983961, 34.017887],
            link: "https://www.2poso.com/en/venues/ayia-napa-sculpture-park"
        },
        {
            name: "Love Bridge (Most Miłości)",
            description: "Naturalny most skalny – idealny na zdjęcia.",
            type: "Natura/Widok",
            coords: [34.982654, 34.016417],
            link: "https://cyprus-faq.com/en/south/cities/gde-nakhoditsya-most-vlyublennykh-na-kipre/"
        },
        {
            name: "Promenada Foinikoudes (Larnaka)",
            description: "Nadmorska promenada z palmami, knajpkami i sportami wodnymi.",
            type: "Natura/Miejska",
            coords: [34.913639, 33.634671],
            link: "https://en.wikipedia.org/wiki/Foinikoudes"
        },
        {
            name: "Cerkiew św. Łazarza (Larnaka)",
            description: "Świątynia z grobem św. Łazarza – jedno z najważniejszych miejsc w Larnace.",
            type: "Zabytek",
            coords: [34.91258, 33.63691],
            link: "https://en.wikipedia.org/wiki/Church_of_Saint_Lazarus,_Larnaca"
        },
        {
            name: "Zamek w Larnace",
            description: "Twierdza nad morzem z muzeum i panoramą na Foinikoudes.",
            type: "Zabytek",
            coords: [34.911977, 33.638072],
            link: "https://en.wikipedia.org/wiki/Larnaca_Fort"
        },
        {
            name: "Klasztor Stawrowouni",
            description: "Klasztor na wzgórzu z IV w., z niesamowitym widokiem na okolice.",
            type: "Zabytek/Widok",
            coords: [34.8707, 33.4153],
            link: "https://en.wikipedia.org/wiki/Stavrovouni_Monastery"
        },
        {
            name: "Vasa Village (Limassol region)",
            description: "Spokojna wioska z winnicami i dobrą kuchnią.",
            type: "Lokalny klimat",
            coords: [34.777591, 32.947068],
            link: "https://en.wikipedia.org/wiki/Vasa_Koilaniou"
        },
        {
            name: "Aphrodite's Rock (Petra tou Romiou)",
            description: "Legendarne miejsce narodzin Afrodyty, punkt widokowy.",
            type: "Natura/Widok",
            coords: [34.665, 32.6116],
            link: "https://www.visitcyprus.com/discover-cyprus/culture/sites-and-monuments/birthplace-of-aphrodite-petra-tou-romiou/"
        },
        {
            name: "Wrak Edro III (Peyia Sea Caves)",
            description: "Statek osiadły przy wybrzeżu – kultowe miejsce na zachód słońca.",
            type: "Natura/Foto",
            coords: [35.006481, 32.312795],
            link: "https://en.wikipedia.org/wiki/EDRO_III"
        },
        {
            name: "Papouis Protaras Hotel",
            description: "Twój hotel w Protaras.",
            type: "Hotel",
            coords: [35.024206, 34.041116],
            link: "https://maps.google.com/?q=Papouis+Protaras+Hotel"
        }
        ];        // Przechowywanie markerów w tablicy
        const markers = [];

        // Dodanie markerów na mapę
        attractions.forEach((attraction, index) => {
            const marker = L.marker(attraction.coords, {
                icon: createIcon(attraction.type)
            });
            
            // Styl popup na podstawie typu
            let popupClass = '';
            switch(attraction.type) {
                case 'Natura':
                    popupClass = 'natura';
                    break;
                case 'Zabytek':
                    popupClass = 'zabytek';
                    break;
                case 'Zabytek/Lokalny klimat':
                    popupClass = 'lokalny';
                    break;
                case 'Hotel':
                    popupClass = 'hotel';
                    break;
            }
            
            const popupContent = `
                <div class="popup-content">
                    <div class="popup-title">${attraction.name}</div>
                    <div class="popup-type ${popupClass}">${attraction.type}</div>
                    <div class="popup-description">${attraction.description}</div>
                    <a href="${attraction.link}" target="_blank" class="popup-link">
                        Zobacz na mapie Google
                    </a>
                </div>
            `;
            
            marker.bindPopup(popupContent);
            
            // Dodanie markera do mapy i tablicy
            marker.addTo(map);
            markers.push(marker);
        });

        // Sprawdzenie czy markery są na mapie po załadowaniu
        map.whenReady(function() {
            console.log(`Dodano ${markers.length} markerów na mapę`);
            
            // Upewnienie się, że wszystkie markery są widoczne
            markers.forEach(marker => {
                if (!map.hasLayer(marker)) {
                    marker.addTo(map);
                }
            });
        });

        // Animacja spadających piw
        function createFallingBeer() {
            const beerContainer = document.getElementById('beer-container');
            const beerEmojis = ['🍺', '🍻', '🥂', '🍾', '🍸', '🍹', '🥃', '🍷'];
            const beer = document.createElement('div');

            beer.className = 'beer-falling';
            beer.textContent = beerEmojis[Math.floor(Math.random() * beerEmojis.length)];
            beer.style.left = Math.random() * 100 + '%';
            beer.style.animationDelay = Math.random() * 2 + 's';

            beerContainer.appendChild(beer);

            // Usuń piwo po zakończeniu animacji
            setTimeout(() => {
                if (beer.parentNode) {
                    beer.parentNode.removeChild(beer);
                }
            }, 5000);
        }

        // Loading Screen Management
        function startLoadingScreen() {
            const loadingScreen = document.getElementById('loading-screen');
            const progressFill = document.getElementById('progress-fill');
            const loadingText = document.getElementById('loading-text');
            const beerCount = document.getElementById('beer-count');
            const beachCount = document.getElementById('beach-count');
            const friendCount = document.getElementById('friend-count');

            const tips = [
                document.getElementById('tip-1'),
                document.getElementById('tip-2'),
                document.getElementById('tip-3'),
                document.getElementById('tip-4'),
                document.getElementById('tip-5'),
                document.getElementById('tip-6')
            ];

            const loadingMessages = [
                "Inicjalizacja systemu...",
                "Ładowanie protokołu alkoholowego...",
                "Sprawdzanie poziomu testosteronu...",
                "Kalibracja czujników imprezy...",
                "Przygotowanie strategii all inclusive...",
                "Ładowanie mapy tawern...",
                "Synchronizacja z greckimi bogami...",
                "Gotowe do działania!"
            ];

            let currentTipIndex = 0;
            let progress = 0;
            let beerCounter = 0;
            let beachCounter = 0;
            let friendCounter = 0;

            // Funkcja do aktualizacji progress baru
            function updateProgress() {
                progress += Math.random() * 8 + 2; // Random progress increment
                if (progress > 100) progress = 100;

                progressFill.style.width = progress + '%';
                loadingText.textContent = loadingMessages[Math.floor(progress / 15)] || loadingMessages[loadingMessages.length - 1];

                // Aktualizacja liczników
                if (beerCounter < 42) beerCounter += Math.floor(Math.random() * 3) + 1;
                if (beachCounter < 15) beachCounter += Math.floor(Math.random() * 2);
                if (friendCounter < 9) friendCounter += Math.floor(Math.random() * 2);

                beerCount.textContent = Math.min(beerCounter, 42);
                beachCount.textContent = Math.min(beachCounter, 15);
                friendCount.textContent = Math.min(friendCounter, 9);

                // Zmiana aktywnych tipów
                const newTipIndex = Math.floor(progress / 16.7);
                if (newTipIndex !== currentTipIndex && newTipIndex < tips.length) {
                    tips[currentTipIndex].classList.remove('active');
                    tips[newTipIndex].classList.add('active');
                    currentTipIndex = newTipIndex;
                }

                if (progress < 100) {
                    setTimeout(updateProgress, Math.random() * 300 + 200); // Random interval
                } else {
                    // Loading zakończone
                    setTimeout(() => {
                        loadingScreen.classList.add('hidden');
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                        }, 500);
                    }, 500);
                }
            }

            // Rozpocznij loading
            setTimeout(updateProgress, 500);

            // Uruchom deszcz piw razem z loading screen
            startBeerRainDuringLoading();
        }

        // Uruchom loading screen natychmiast
        document.addEventListener('DOMContentLoaded', startLoadingScreen);

        // Deszcz piw uruchamia się razem z loading screen
        function startBeerRainDuringLoading() {
            const beerInterval = setInterval(createFallingBeer, 500); // Częstsze piwa podczas ładowania

            // Zatrzymaj deszcz piw po zakończeniu loading screen (około 6-7 sekund)
            setTimeout(() => {
                clearInterval(beerInterval);
            }, 6500); // Dopasowane do czasu loading screen
        }
    </script>
</body>
</html>
